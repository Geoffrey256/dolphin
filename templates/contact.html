{% extends 'base.html' %}
{% block content %}
    <div class="container mt-5">
        <h2>Contact Us</h2>

        <form id="contactForm" method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" class="form-control" id="name" name="name" placeholder="Enter your name" required>
            </div>

            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email" required>
            </div>

            <div class="form-group">
                <label for="message">Message</label>
                <textarea class="form-control" id="message" name="message" rows="4" placeholder="Your message here" required></textarea>
            </div>

            <button type="submit" class="btn btn-primary">Send Message</button>

            <!-- WhatsApp Contact Button -->
            <a id="whatsappBtn" class="btn btn-success mt-2">Send via WhatsApp</a>
        </form>

        <h3 class="mt-4">Or reach us at:</h3>
        <p>Email: <a href="alexkerunga7@gmail.com">alexkerunga7@gmail.com</a></p>
        <p>Phone: <a href="tel:+256 784093021">+256 784 093 021</a></p>
        <p>Address: Naguru near China Hospital, Kampala, Uganda</p>

        <!-- Social Media Links -->
        <div class="mt-4">
            <h4>Follow Us:</h4>
            <a href="https://t.me/" target="_blank" class="btn btn-info">Telegram</a>
            <a href="https://www.instagram.com/alexkerunga" target="_blank" class="btn btn-danger">Instagram</a>
            <a href="https://www.tiktok.com/@kerlexaquarium" target="_blank" class="btn btn-dark">TikTok</a>
            <a href="https://www.facebook.com/kerlexaquarium" target="_blank" class="btn btn-primary">Facebook</a>
            <a href="https://wa.me/256784093021" target="_blank" class="btn btn-success">WhatsApp</a>
            <a href="https://twitter.com/jalkwiogeof99" target="_blank" class="btn btn-secondary">X (Twitter)</a>
        </div>
    </div>

    <!-- JavaScript for AJAX Form Submission -->
    <script>
        document.getElementById("contactForm").addEventListener("submit", function(event) {
            event.preventDefault();
            let formData = new FormData(this);

            fetch("{% url 'contact' %}", {
                method: "POST",
                body: formData,
                headers: {
                    "X-Requested-With": "XMLHttpRequest"
                }
            })
            .then(response => response.json())
            .then(data => {
                alert(data.success || data.error);
                if (data.success) {
                    // Clear input fields on success
                    document.getElementById("contactForm").reset();
                }
            })
            .catch(error => console.error("Error:", error));
        });

        // WhatsApp message function
        document.getElementById("whatsappBtn").addEventListener("click", function() {
            let name = document.getElementById("name").value.trim();
            let message = document.getElementById("message").value.trim();
            let phoneNumber = "256764593420";

            if (name === "" || message === "") {
                alert("Please enter your name and message before sending to WhatsApp.");
                return;
            }

            let whatsappURL = `https://wa.me/${phoneNumber}?text=Hello, my name is ${encodeURIComponent(name)}. ${encodeURIComponent(message)}`;
            window.open(whatsappURL, "_blank");
        });
    </script>
{% endblock %}
